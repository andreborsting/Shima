<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project: Shima</title>

    <!-- Pixelify font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">



    <!-- <link rel="stylesheet" href="styles.css"> -->

    <!-- alternativt i bunden (defer er kun til toppen) -->
    <!-- <script src="script.js" defer></script> -->

</head>

<body>
    <style>
        /* Guideline for pixelify font:
        <weight>: Use a value from 400 to 700
        <uniquifier>: Use a unique and descriptive class name
        .pixelify-sans-<uniquifier> {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: <weight>;
            font-style: normal;
        } */

        .pixelify-sans-universal {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
        }









        html {
            background-color: black;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 600;
            font-style: normal;
            font-size: 2.5em;
        }

        p {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 600;
            font-style: normal;
            font-size: 2.5em;
        }




        /* Menu Containers */
        .menu-container {
            display: flex;
            flex-direction: column;
            gap: 10px;

            padding: 10px;
        }

        .menu-container button {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 600;
            font-style: normal;
            font-size: 1.5em;


            position: relative;
            padding: 10px;
            border-radius: 5px;
        }

        .menu-container button:hover {
            color: white;
            background-color: black;
        }









        .ui-container {
            margin: 5px;
            display: flex;
            flex-direction: row;
            align-items: flex-start;
        }





        /* bare så teksten lige passer med  */
        .health-bar {
            width: 170px;
        }

        .health-bar p {
            margin-top: 0px;
            margin-bottom: 0px;
            
            margin-left: 5px;
            font-size: 20px;
        }

        #health-background {
            background-image: url(sprites/health-bar-white2.png);

            position: relative;
            z-index: 0;

            /* adjust height of healthbar */
            top: 0px;

            /* Problemet var at size var sat til contain!! */
            background-size: 100% 100%;
            background-repeat: no-repeat;


            margin-left: 5px;

            image-rendering: pixelated;

            /* logikken bruger procent så width er i procent */
            width: 100%;
            height: 32px;
        }

        #health-fill {
            background-image: url(sprites/health-bar-green2.png);

            position: relative;
            z-index: 1;

            /* adjust height of healthbar */
            top: -32px;

            /* Problemet var at size var sat til contain!! */
            background-size: 100% 100%;
            background-repeat: no-repeat;

            margin-left: 5px;

            image-rendering: pixelated;

            /* logikken bruger procent så width er procent */
            width: 100%;
            height: 32px;

            transition: width 0.5s ease;
        }

        /* Notfikationssystem styling */
        #notification-container {
            display: flex;
            gap: 10px;

            position: absolute;
            top: 70px;
            left: 550px;

            /* Nyeste notifikation øverst */
            flex-direction: column-reverse;

            font-size: 20px;
        }

        .notification {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 600;
            font-style: normal;
            font-size: 1em;


            color: white;
            width: auto;
            height: auto;
            border-radius: 5px;

            transition: opacity 2s, transform 3s;
            opacity: 1;
            transform: translateY(0px);

        }

        .notification.hide {
            /* transition påvirker disse */
            opacity: 0;
            transform: translateY(100px);
        }

        .notification.default {
            background-color: rgb(0, 0, 0);
        }

        .notification.success {
            background-color: green;
        }

        .notification.error {
            background-color: red;
        }





        #debugging-screen {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 10px;
        }

        #debugging-screen button {
            font-family: "Pixelify Sans", sans-serif;
            font-optical-sizing: auto;
            font-weight: 600;
            font-style: normal;
            font-size: 1.0em;

            padding: 10px;
            border-radius: 5px;
            color: white;
            background-color: black;
            border: 2px solid white;
        }

        #debugging-screen button:hover {
            color: black;
            background-color: white;
        }



        /* problemer med positionering løser jeg med wrapper */
        #game-wrapper {
            display: flex;
            justify-content: center;
        }

        /* Splash screen styling */
        #splash-screen {
            /* vises fra start */
            display: flex;
            justify-content: center;
            width: 700px;
            height: 400px;

            position: relative;

            background-color: hsla(0, 0%, 100%, 0.90);
        }

        /* Game screen styling */
        #game-screen {
            /* skjules fra start */
            display: none;

            background-image: url(sprites/shima-idle-still.png);
            background-size: contain;
            background-repeat: no-repeat;
            image-rendering: pixelated;

            background-position: 60% center;

            width: 700px;
            height: 400px;

            position: relative;

            background-color: #a0d9ef;

        }



        #options-menu {
            /* skjules fra start */
            display: none;
            justify-content: center;
            width: 700px;
            height: 400px;

            position: relative;

            background-color: hsla(0, 0%, 100%, 0.90);
        }

        #extras-menu {
            /* skjules fra start */
            display: none;
            justify-content: center;
            width: 700px;
            height: 400px;

            position: relative;

            background-color: hsla(0, 0%, 100%, 0.90);
        }

        #animations-menu {
            /* skjules fra start */
            display: none;
            justify-content: center;
            width: 700px;
            height: 400px;

            position: relative;

            background-color: hsla(0, 0%, 100%, 0.90);
        }

        #settings-menu {
            /* skjules fra start */
            display: none;
            justify-content: center;
            width: 700px;
            height: 400px;

            position: relative;

            background-color: hsla(0, 0%, 100%, 0.90);
        }


        /* orme display (ligger i "health-bar" div! så matches med disse elementer) */
        #worms-container img {
            width: 18px;
            height: auto;
            image-rendering: pixelated;

            /* matcher health-bar */
            margin-left: 16px;
        }

        /* Slider styling herunder https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_js_rangeslider_round */
        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 15px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #000000;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #04AA6D;
            cursor: pointer;
        }



        #menu-button {
            position: absolute;
            left: 600px;
            top: 5px;
        }
    </style>

    <!-- Problemer med positionering løses med wrapper -->
    <div id="game-wrapper">


        <!-- Game screen -->
        <div id="game-screen">
            <div class="ui-container">



                <!-- Health Bar: Dynamisk "health-value" og "health fill"  -->
                <div class="health-bar">
                    <p>Health: <span id="health-value">100</span></p>
                    <div id="health-background"></div>
                    <div id="health-fill"></div>

                    <p>Worm(s): <span id="worms-value">0</span></p>

                    <div id="worms-container"></div>
                    <!-- fjerner det statiske billede herunder, og erstatter med dynamisk div ovenstående -->
                    <!-- <img src="sprites/one-worm1.png" alt="Worms visual UI element"> -->

                    <!-- Notifikations-container -->
                    <div id="notification-container"></div>

                </div>

                <!-- Menu Knap (fra game screen) -->
                <div class="menu-container">
                    <button id="menu-button" type="button">Menu</button>
                </div>


            </div>
        </div>






        <!-- Splash screen -->
        <div id="splash-screen">
            <div class="menu-container">
                <h1>Project: Shima</h1>

                <button id="startGameBtn" type="button">New Game</button>

                <button id="optionsBtn" type="button">Options</button>

            </div>
        </div>

        <div id="options-menu">
            <div class="menu-container">
                <h1>Options</h1>

                <!-- Virker ikke optimalt endnu -->
                <button id="extrasBtn" type="button">Extras</button>

                <!-- ingen defineret logik -->
                <button id="settingsBtn" type="button">Settings</button>

                <!-- Defineret -->
                <button id="backBtn" type="button">Back</button>
            </div>
        </div>

        <div id="extras-menu">
            <div class="menu-container">
                <h1>Extras</h1>

                <button id="animationsBtn" type="button">Animations</button>
                <button id="backToOptionsBtn" type="button">Back to Options</button>

            </div>
        </div>

        <div id="animations-menu">
            <div class="menu-container">
                <h1>Animations</h1>

                <img style="image-rendering: pixelated;" src="sprites/shima-jump.gif" alt="Gif of jumping Shima">

                <button id="backToOptionsFromAnimationsBtn">Back to Options</button>
            </div>
        </div>

        <div id="settings-menu">
            <div class="menu-container">
                <h1>Settings</h1>

                <!-- https://www.w3schools.com/howto/howto_js_rangeslider.asp -->
                <div class="slidecontainer">
                    <p>Volume: <span id="volume-value"></span></p>
                    <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
                </div>

                <button id="backToOptionsFromSettingsBtn" type="button">Back</button>

            </div>
        </div>






    </div>


    <!-- Debugging Screen -->
    <div id="debugging-screen">
        <button id="oneWormBtn" type="button">Acquire 1 Worm</button>
        <button id="eatWormBtn" type="button">Eat Worm</button>
        <button id="oneDmgBtn" type="button">Take 1 Damage</button>
        <button id="fiveDmgBtn" type="button">Take 5 Damage</button>
    </div>

    <!-- JavaScript -->
    <script>

        // Slider logik
        let slider = document.getElementById("myRange");
        let output = document.getElementById("volume-value")

        slider.oninput = function () {
            output.innerHTML = this.value;
        }

        // Deklarationer
        const gameScreen = document.getElementById("game-screen");
        const splashScreen = document.getElementById("splash-screen");

        const startGameBtn = document.getElementById("startGameBtn");
        const optionsBtn = document.getElementById("optionsBtn");
        const backBtn = document.getElementById("backBtn");
        const extrasBtn = document.getElementById("extrasBtn");
        const animationsBtn = document.getElementById("animationsBtn");
        const backToOptionsBtn = document.getElementById("backToOptionsBtn");
        const backToOptionsFromAnimationsBtn = document.getElementById("backToOptionsFromAnimationsBtn");
        const backToOptionsFromSettingsBtn = document.getElementById("backToOptionsFromSettingsBtn");

        const settingsBtn = document.getElementById("settingsBtn");

        const optionsMenu = document.getElementById("options-menu");
        const extrasMenu = document.getElementById("extras-menu");
        const animationsMenu = document.getElementById("animations-menu");

        const settingsMenu = document.getElementById("settings-menu");

        const menuBtn = document.getElementById("menu-button");

        // Menuer - sidehåndtering

        startGameBtn.addEventListener("click", function () {
            gameScreen.style.display = "flex";
            optionsMenu.style.display = "none";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        optionsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "flex";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        backBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "none";
            splashScreen.style.display = "flex";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        extrasBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "none";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "flex";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        animationsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "none";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "flex";
            settingsMenu.style.display = "none";
        });

        backToOptionsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "flex";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        backToOptionsFromAnimationsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "flex";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        settingsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "none";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "flex";
        });

        backToOptionsFromSettingsBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "flex";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        });

        menuBtn.addEventListener("click", function () {
            gameScreen.style.display = "none";
            optionsMenu.style.display = "flex";
            splashScreen.style.display = "none";
            extrasMenu.style.display = "none";
            animationsMenu.style.display = "none";
            settingsMenu.style.display = "none";
        })

        // Notifikationssystem: 
        // "duration" = tiden notifikationen vise før ".hide" oprettes)
        // "fadeOutTime" = tid før ".hide" fjernes i DOM efter oprettelse)
        function showNotification(message, type = 'default', duration = 1000 * 2, fadeOutTime = 1000 * 3) {
            const notificationContainer = document.getElementById('notification-container')
            const notificationBox = document.createElement('div');
            notificationBox.classList.add('notification', type);
            notificationBox.textContent = message;

            notificationContainer.appendChild(notificationBox);

            setTimeout(() => {
                notificationBox.classList.add('hide');
                setTimeout(() => notificationBox.remove(), fadeOutTime);
            }, duration);
        }

        // "Auto Notifikation - til "automatisk kør" under styling (comment out when done)

        // function runNotifications() {
        //     setInterval(() => {
        //         showNotification("Test notification!", "success");
        //     }, 1000 * 3);
        // }
        // runNotifications();

        // Health Bar logikken 
        let health = 100;
        const healthFill = document.getElementById("health-fill");
        const healthValue = document.getElementById("health-value");

        function updateHealth(change) {
            health = Math.max(0, Math.min(100, health + change));

            healthFill.style.width = health + "%";

            healthValue.textContent = health;

            if (health <= 0) {
                showNotification("You died!", "error");
            }
        }

        // knapper til debugging/gameplay mechanics
        const oneWormBtn = document.getElementById("oneWormBtn")
        const oneDmgBtn = document.getElementById("oneDmgBtn")
        const fiveDmgBtn = document.getElementById("fiveDmgBtn")
        const eatWormBtn = document.getElementById("eatWormBtn")

        // Worm logik
        let worms = 0;
        const wormsValue = document.getElementById("worms-value");

        function updateWorms(change) {
            worms = Math.max(0, Math.min(5, worms + change));
            wormsValue.textContent = worms;


            // Fejl: Efter implementering af if...else.
            // Problem: Notifikation "You Collected a Worm!" skal kun vises når der indsamles en orm.
            // Løsning: tjekke om "change" er et positivt tal("når ormen indsamles")
            // "Collection"(change = +1) vs "Consuming"(change = -1) - og derfor:
            if (change > 0) {
                if (worms >= 5) {
                    showNotification("You Cannot Carry anymore Worms", "error");
                } else {
                    showNotification("You collected a Worm!", "success");
                }
            };
                


            // Dynamisk div (worms stacking)
            const wormsContainer = document.getElementById("worms-container");
            wormsContainer.innerHTML = "";

            for (let i = 0; i < worms; i++) {
                const wormImg = document.createElement("img");
                wormImg.src = "sprites/one-worm4.png";
                wormImg.alt = "Worm image";
                wormsContainer.appendChild(wormImg);
            }
        }

        // Debugging Screen Buttons logik her
        oneWormBtn.addEventListener("click", function (e) {

            console.log('Du klikkede på "Acquire 1 Worm" knappen!')

            updateWorms(1);

        });

        eatWormBtn.addEventListener("click", function (e) {

            console.log('Du klikkede på "Eat Worm" knappen!')

            if (worms > 0) {
                updateWorms(-1);
                updateHealth(5);
                showNotification("You ate a Worm! Gained 5 HP", "success");
            } else {
                showNotification("No more worms :(", "error");
            }
        });

        oneDmgBtn.addEventListener("click", function (e) {

            console.log('Du klikkede på "Take 1 Damage" knappen!')

            updateHealth(-1);

            showNotification("You took 1 Damage!", "error");
        });

        fiveDmgBtn.addEventListener("click", function (e) {

            console.log('Du klikkede på "Take 5 Damage" knappen!')

            updateHealth(-5);

            showNotification("You took 5 Damage!", "error");
        });





    </script>


    <!-- <script src="script.js"></script> -->

</body>

</html>